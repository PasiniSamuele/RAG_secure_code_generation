schema: '2.0'
stages:
  filter_dataset:
    cmd: python src/filter_dataset.py --data data/FMereani.csv --dest data/filtered.csv
      --params params.yaml
    deps:
    - path: data/FMereani.csv
      hash: md5
      md5: 3f25b32037cab2b97b17e8ad26cf5f5c
      size: 19129116
    - path: src/filter_dataset.py
      hash: md5
      md5: 78a81ea6803e1f0fe79c0a4a9b35d058
      size: 1174
    params:
      params.yaml:
        filter_dataset:
          starting_strs:
          - https://
          - http://
    outs:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
  dataset_split:
    cmd: python src/dataset_split.py --data data/filtered.csv --dest_train data/train.csv
      --dest_test data/test.csv --params params.yaml
    deps:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
    - path: src/dataset_split.py
      hash: md5
      md5: 7b5377b9be415d41c8580df84eab24ec
      size: 1468
    params:
      params.yaml:
        dataset_split:
          train_size: 0.5
    outs:
    - path: data/test.csv
      hash: md5
      md5: 2729d90175cf8d55989b29f9c79cc65e
      size: 2116897
    - path: data/train.csv
      hash: md5
      md5: ecfaf7d7df5d43f7e2b6612dfc1862a0
      size: 2111125
  dataset_trainval_test_split:
    cmd: python src/dataset_split.py --data data/filtered.csv --dest_train data/trainval.csv
      --dest_test data/test.csv --split_arguments dataset_trainval_test_split --params
      params.yaml
    deps:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_trainval_test_split:
          train_size: 0.8
    outs:
    - path: data/test.csv
      hash: md5
      md5: dc5a8a1a8ee2e39f1dc1398d8353fd25
      size: 838801
    - path: data/trainval.csv
      hash: md5
      md5: a7ed92a62625648df212013212a94fe1
      size: 3389221
  dataset_train_val_split:
    cmd: python src/dataset_split.py --data data/trainval.csv --dest_train data/train.csv
      --dest_test data/val.csv --split_arguments dataset_train_val_split --params
      params.yaml
    deps:
    - path: data/trainval.csv
      hash: md5
      md5: a7ed92a62625648df212013212a94fe1
      size: 3389221
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_train_val_split:
          train_size: 0.5
    outs:
    - path: data/train.csv
      hash: md5
      md5: 4d662e8151248357e7ddbe1aa8fa0b85
      size: 1693928
    - path: data/val.csv
      hash: md5
      md5: 434b53d54c13886b212481287ab8a2c1
      size: 1695308
  uniform_dataset:
    cmd: python src/uniform_dataset.py --data data/payload_quoted.csv --dest data/payload_sqli.csv
      --params params.yaml
    deps:
    - path: data/payload_quoted.csv
      hash: md5
      md5: d7445cf6b9ee0da37672902b366ec83a
      size: 808261
    - path: src/uniform_dataset.py
      hash: md5
      md5: 5bb3519f24cce75a2c732426153dda5b
      size: 2546
    params:
      params.yaml:
        uniform_sqli:
          payload_column: payload
          label_column: attack_type
          benign_label: norm
          malicious_label: sqli
          final_benign_label: Benign
          final_malicious_label: Malicious
          final_payload_column: Payloads
          final_label_column: Class
    outs:
    - path: data/payload_sqli.csv
      hash: md5
      md5: 530f133084fb28b57e27a1553f72bcfa
      size: 272407
  sqli_trainval_test_split:
    cmd: python src/dataset_split.py --data data/payload_sqli.csv --dest_train data/trainval_sqli.csv
      --dest_test data/test_sqli.csv --split_arguments dataset_trainval_test_split
      --params params.yaml
    deps:
    - path: data/payload_sqli.csv
      hash: md5
      md5: 530f133084fb28b57e27a1553f72bcfa
      size: 272407
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_trainval_test_split:
          train_size: 0.8
    outs:
    - path: data/test_sqli.csv
      hash: md5
      md5: 2837d91acda976a61fb3e6d224c481db
      size: 53601
    - path: data/trainval_sqli.csv
      hash: md5
      md5: 4e34013412dc958800921d7bed608164
      size: 218821
  sqli_train_val_split:
    cmd: python src/dataset_split.py --data data/trainval_sqli.csv --dest_train data/train_sqli.csv
      --dest_test data/val_sqli.csv --split_arguments dataset_train_val_split --params
      params.yaml
    deps:
    - path: data/trainval_sqli.csv
      hash: md5
      md5: 4e34013412dc958800921d7bed608164
      size: 218821
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_train_val_split:
          train_size: 0.5
    outs:
    - path: data/train_sqli.csv
      hash: md5
      md5: 753dccbdac7adc7040253ca14c2f6a98
      size: 110123
    - path: data/val_sqli.csv
      hash: md5
      md5: 4ddf2881e0e5d4adcc50b535af94a5a3
      size: 108713
  fix_dataset_quotes:
    cmd: python src/fix_dataset_quotes.py --data data/payload_mixed.csv --dest data/payload_quoted.csv
    deps:
    - path: data/payload_mixed.csv
      hash: md5
      md5: 38ff928ee312b2b5742f306c5e83c29c
      size: 1996540
    - path: src/fix_dataset_quotes.py
      hash: md5
      md5: 6174dc0e8aa36693931e8be6a4b36e3e
      size: 1349
    outs:
    - path: data/payload_quoted.csv
      hash: md5
      md5: d7445cf6b9ee0da37672902b366ec83a
      size: 808261
