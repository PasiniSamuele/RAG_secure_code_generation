schema: '2.0'
stages:
  filter_dataset:
    cmd: python src/filter_dataset.py --data data/FMereani.csv --dest data/filtered.csv
      --params params.yaml
    deps:
    - path: data/FMereani.csv
      hash: md5
      md5: 3f25b32037cab2b97b17e8ad26cf5f5c
      size: 19129116
    - path: src/filter_dataset.py
      hash: md5
      md5: 78a81ea6803e1f0fe79c0a4a9b35d058
      size: 1174
    params:
      params.yaml:
        filter_dataset:
          starting_strs:
          - https://
          - http://
    outs:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
  dataset_split:
    cmd: python src/dataset_split.py --data data/filtered.csv --dest_train data/train.csv
      --dest_test data/test.csv --params params.yaml
    deps:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
    - path: src/dataset_split.py
      hash: md5
      md5: 7b5377b9be415d41c8580df84eab24ec
      size: 1468
    params:
      params.yaml:
        dataset_split:
          train_size: 0.5
    outs:
    - path: data/test.csv
      hash: md5
      md5: 2729d90175cf8d55989b29f9c79cc65e
      size: 2116897
    - path: data/train.csv
      hash: md5
      md5: ecfaf7d7df5d43f7e2b6612dfc1862a0
      size: 2111125
  dataset_trainval_test_split:
    cmd: python src/dataset_split.py --data data/filtered.csv --dest_train data/trainval.csv
      --dest_test data/test.csv --split_arguments dataset_trainval_test_split --params
      params.yaml
    deps:
    - path: data/filtered.csv
      hash: md5
      md5: 2fc675ff5189b179493acdceeabac0ac
      size: 4228007
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_trainval_test_split:
          train_size: 0.8
    outs:
    - path: data/test.csv
      hash: md5
      md5: dc5a8a1a8ee2e39f1dc1398d8353fd25
      size: 838801
    - path: data/trainval.csv
      hash: md5
      md5: a7ed92a62625648df212013212a94fe1
      size: 3389221
  dataset_train_val_split:
    cmd: python src/dataset_split.py --data data/trainval.csv --dest_train data/train.csv
      --dest_test data/val.csv --split_arguments dataset_train_val_split --params
      params.yaml
    deps:
    - path: data/trainval.csv
      hash: md5
      md5: a7ed92a62625648df212013212a94fe1
      size: 3389221
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_train_val_split:
          train_size: 0.5
    outs:
    - path: data/train.csv
      hash: md5
      md5: 4d662e8151248357e7ddbe1aa8fa0b85
      size: 1693928
    - path: data/val.csv
      hash: md5
      md5: 434b53d54c13886b212481287ab8a2c1
      size: 1695308
  uniform_dataset:
    cmd: python src/uniform_dataset.py --data data/payload_quoted.csv --dest data/payload_sqli.csv
      --params params.yaml
    deps:
    - path: data/payload_quoted.csv
      hash: md5
      md5: 6686470fd159a686d6fd17d3c08961b0
      size: 764421
    - path: src/uniform_dataset.py
      hash: md5
      md5: 5bb3519f24cce75a2c732426153dda5b
      size: 2546
    params:
      params.yaml:
        uniform_sqli:
          payload_column: payload
          label_column: attack_type
          benign_label: norm
          malicious_label: sqli
          final_benign_label: Benign
          final_malicious_label: Malicious
          final_payload_column: Payloads
          final_label_column: Class
    outs:
    - path: data/payload_sqli.csv
      hash: md5
      md5: 260fffc59aab78edf9a79081b26c5c11
      size: 263623
  sqli_trainval_test_split:
    cmd: python src/dataset_split.py --data data/payload_sqli.csv --dest_train data/trainval_sqli.csv
      --dest_test data/test_sqli.csv --split_arguments dataset_trainval_test_split
      --params params.yaml
    deps:
    - path: data/payload_sqli.csv
      hash: md5
      md5: 260fffc59aab78edf9a79081b26c5c11
      size: 263623
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_trainval_test_split:
          train_size: 0.8
    outs:
    - path: data/test_sqli.csv
      hash: md5
      md5: 82ccf8f6269abbd6a1e3329af1e56a6a
      size: 51845
    - path: data/trainval_sqli.csv
      hash: md5
      md5: 239d8f196a6572a66ecabcc51d1d6e1a
      size: 211793
  sqli_train_val_split:
    cmd: python src/dataset_split.py --data data/trainval_sqli.csv --dest_train data/train_sqli.csv
      --dest_test data/val_sqli.csv --split_arguments dataset_train_val_split --params
      params.yaml
    deps:
    - path: data/trainval_sqli.csv
      hash: md5
      md5: 239d8f196a6572a66ecabcc51d1d6e1a
      size: 211793
    - path: src/dataset_split.py
      hash: md5
      md5: c571c3fa613cc9e7fff9d96b40629a6d
      size: 1610
    params:
      params.yaml:
        dataset_train_val_split:
          train_size: 0.5
    outs:
    - path: data/train_sqli.csv
      hash: md5
      md5: 6e8c37c5f9ed298f652578b50e12c01c
      size: 106611
    - path: data/val_sqli.csv
      hash: md5
      md5: dc8467a0c737a16f700c1ecd5065b708
      size: 105197
  fix_dataset_quotes:
    cmd: python src/fix_dataset_quotes.py --data data/payload_mixed.csv --dest data/payload_quoted.csv
    deps:
    - path: data/payload_mixed.csv
      hash: md5
      md5: 38ff928ee312b2b5742f306c5e83c29c
      size: 1996540
    - path: src/fix_dataset_quotes.py
      hash: md5
      md5: 35844637dc4a304cbd2562f7af7d5c4d
      size: 1386
    outs:
    - path: data/payload_quoted.csv
      hash: md5
      md5: 6686470fd159a686d6fd17d3c08961b0
      size: 764421
